@import "animation.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* IDE Theme: CSS variable colors for structural elements.
   Light values are baked as var() fallbacks; dark overrides below.
   A full theme system can later replace both with runtime setProperty(). */
:root.dark {
    --ide-bg: #222222;
    --ide-bg-alt: #333333;
    --ide-text: #EEEEEE;
    --ide-text-muted: #AAAAAA;
    --ide-accent: #FF8833;
    --ide-accent-hover: #ffa64d;
    --ide-border: #555555;
    --ide-editor-bg: #1e1e1e;
    --ide-console-bg: #222222;
}

body {
    background-color: var(--ide-bg, #DDEEFF);
    color: var(--ide-text, #555555);
}

/* Theme-aware scrollbars */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--ide-border, #C9E0F7) var(--ide-bg, #DDEEFF);
}

*::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

*::-webkit-scrollbar-track {
    background: var(--ide-bg, #DDEEFF);
}

*::-webkit-scrollbar-thumb {
    background-color: var(--ide-border, #C9E0F7);
    border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
    background-color: var(--ide-text-muted, #8b8f96);
}

#app-left {
    background-color: var(--ide-bg, #DDEEFF);
}

.header {
    background-color: var(--ide-bg-alt, #DDEEFF);
    border-color: var(--ide-border, #C9E0F7);
}

#vmMonitorContainer {
    background-color: var(--ide-bg, #DDEEFF);
}

#inputPanel {
    background-color: var(--ide-bg, #DDEEFF);
}

#GUIContainer,
#HIDContainer,
#SensorContainer {
    background-color: var(--ide-bg, #DDEEFF);
}

#console {
    background-color: var(--ide-console-bg, #ffffff);
}

#inputPanel {
    background-color: var(--ide-bg, #DDEEFF);
}

#GUIContainer,
#HIDContainer,
#SensorContainer {
    background-color: var(--ide-bg, #DDEEFF);
}

#visualizerContainer {
    background-color: var(--ide-console-bg, #ffffff);
}

#console {
    background-color: var(--ide-console-bg, #ffffff);
}

/* Theme-aware accent color for toggles and selected items */
.text-accent {
    color: var(--ide-accent, #FF8833);
}

/* WEBCHUCK IDE LAYOUT */
#navbarWrapper {
    background-color: var(--ide-bg-alt, #DDEEFF);
    grid-area: nav;
    user-select: none;
    -webkit-touch-callout: none;
}

#chuckBar {
    background-color: var(--ide-bg, #DDEEFF);
    grid-area: chuckBar;
}

#webchuck-ide {
    display: grid;
    grid-template-rows: 3rem auto 1fr;
    grid-template-columns: 100%;
    grid-template-areas:
        "nav"
        "chuckBar"
        "app";
    overflow: hidden;
}

#chuckBar {
    grid-area: chuckBar;
}

#app {
    grid-area: app;
    display: grid;
    height: 100%;
    grid-template-areas: "app-left splitV1 app-middle splitV2 app-right";
    /* app column widths */
    grid-template-columns: 2fr 2px 6fr 2px 4fr;
    grid-template-rows: 1fr;
}

/* Mobile Layout â€” structural overrides (grid, visibility of panels) */
@media (max-width: 640px) {
    #webchuck-ide {
        height: 100vh;
        height: 100dvh;
    }

    #app {
        @apply px-2 pb-2;
        grid-template-areas:
            "app-middle"
            "."
            "app-right";
        grid-template-rows: 5fr 2px 5fr;
        grid-template-columns: 100%;
    }

    #app-left, #splitV1, #splitV2 {
        display: none;
    }

    #chuckBar {
        overflow: hidden;
    }

    #chuckBar > div:last-child {
        flex: 1 1 0 !important;
        min-width: 0;
        justify-content: space-evenly;
    }

    #chuckBar .chuck-button {
        flex: 0 1 auto;
        min-width: 0;
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }

    /* Condense the Start button to make room for action buttons */
    #webchuckButton {
        width: auto !important;
        min-width: 0;
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }

    /* Ensure touch targets are 44px minimum */
    .header-item {
        min-height: 2.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Let Monaco handle its own touch scrolling */
    #monacoEditor {
        touch-action: none;
    }

    #app.output-collapsed {
        grid-template-rows: 1fr 2px auto;
    }
}

/* APP LAYOUT */
#splitV1 {
    grid-area: splitV1;
}

#splitV2 {
    grid-area: splitV2;
}

#splitH1 {
    grid-area: splitH1;
}


#app-left {
    grid-area: app-left;
    min-width: 1rem;
    height: 100%;
    width: 100%;
}

#app-middle {
    grid-area: app-middle;
    min-width: 4rem;
    display: grid;
    grid-template-areas:
        "editorPanel"
        "splitH1"
        "inputPanel";
    grid-template-columns: 100%;
    grid-template-rows: 1fr 2px 28px;
}

#app-right {
    grid-area: app-right;
    min-width: 1rem;
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* NAVBAR */
.dropdownButton {
    @apply relative px-2 py-2 mr-1 inline-flex items-center font-semibold rounded hover:text-sky-blue-800 focus-visible:text-sky-blue-800 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-blue-800;
}

.dropdownItem {
    @apply block w-full text-left font-medium px-4 py-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-sky-blue-800;
    color: var(--ide-text, #555);
}
.dropdownItem:hover,
.dropdownItem:focus-visible {
    background-color: var(--ide-border, #ccc);
    color: var(--ide-text, #555);
}

.dropdown {
    @apply absolute z-40 rounded-lg shadow-md ring-1 ring-black ring-opacity-5 focus:outline-none origin-top-left;
    background-color: var(--ide-bg-alt, #ffffff);
    border: 1px solid var(--ide-border, #ccc);
    animation: enter-transition 0.1s ease-in-out forwards;
}

.nestedDropdownButton {
    @apply flex items-center justify-between w-full;
}

.nestedDropdown {
    @apply absolute z-50 max-h-96 overflow-y-auto rounded-lg shadow-md ring-1 ring-black ring-opacity-5 focus:outline-none origin-top-left left-full top-0 -mt-2;
    background-color: var(--ide-bg-alt, #ffffff);
    border: 1px solid var(--ide-border, #ccc);
    animation: enter-transition 0.1s ease-in-out forwards;
}

/* EXAMPLES */
#autocomplete-list li {
    @apply px-3 py-2 cursor-pointer focus:outline-none;
}
#autocomplete-list li:hover,
#autocomplete-list li:focus-visible {
    background-color: var(--ide-border, #ccc);
}

#autocomplete-list pre {
    @apply text-sm font-mono;
}

#autocomplete-list li.selected {
    @apply bg-sky-blue-100 dark:bg-dark-5;
}

.highlight {
    @apply bg-orange-light;
}

.breadcrumb-item {
    @apply inline-flex items-center text-sm font-medium;
    color: var(--ide-text-muted, #555);
}

.breadcrumb-item.hover:hover {
    color: var(--ide-accent, #FF8833);
}

.explorer-item {
    @apply px-3 py-2 cursor-pointer text-lg focus:outline-none;
    color: var(--ide-accent, #FF8833);
}
.explorer-item:hover,
.explorer-item:focus-visible {
    background-color: var(--ide-border, #ccc);
}

.explorer-item.folder {
    @apply font-semibold;
}

/* CHUCK BAR */
#chuckBar .chuck-button {
    @apply rounded-md flex items-center justify-center disabled:opacity-50 focus:outline-none enabled:hover:brightness-110 transition duration-300 focus-visible:ring-2 focus-visible:ring-blue-600 dark:focus-visible:ring-blue-200 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-dark;
    margin: 0.25rem 0;
    padding: 0.375rem 0.75rem;
}

#chuckBar .chuck-button svg {
    width: 1.75rem;
    height: 1.75rem;
}

/* FILE EXPLORER */
#fileExplorerContainer {
    @apply relative w-full flex-1 min-h-0;
}

#fileExplorerUploadPrompt {
    @apply absolute inset-0 flex items-center justify-center bg-white bg-opacity-70 dark:bg-opacity-20 transition;
    user-select: none;
    pointer-events: none;
}

.fileExplorerEntry {
    @apply flex items-center w-full relative hover:cursor-pointer whitespace-nowrap focus:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-blue-600 dark:focus-visible:ring-blue-200;
}

.fileExplorerEntry:hover,
.fileExplorerEntry:focus-visible {
    background-color: color-mix(in srgb, var(--ide-bg-alt, #FEFEFF) 50%, var(--ide-bg, #DDEEFF));
}

.fileExplorerEntry.active {
    background-color: var(--ide-bg-alt, #FCDEC0);
}

.fileExplorerItem {
    @apply px-2 m-1 flex items-center w-full overflow-clip;
}

.fileExplorerItem::before {
    content: url(/img/file.svg);
    @apply dark:filter dark:invert inline-block box-border pr-1 h-7;
}

.fileExplorerItem[type="ck"]::before {
    content: url(/img/ck-color.svg);
    @apply dark:filter-none;
}

.fileExplorerItem[type="wav"]::before {
    content: url(/img/audio.svg);
    @apply dark:filter dark:invert;
}

.fileExplorerItem[type="txt"]::before {
    content: url(/img/txt.svg);
    @apply dark:filter dark:invert;
}

.fileExplorerItem[type="csv"]::before {
    content: url(/img/csv.svg);
    @apply dark:filter dark:invert;
}

.fileExplorerRenameInput {
    @apply flex-1 min-w-0 border rounded px-1 outline-none focus:ring-1;
    background-color: var(--ide-bg, #ffffff);
    border-color: var(--ide-accent, #FF6F20);
}

.fileContextMenu {
    @apply fixed border rounded shadow-lg py-1 min-w-[120px];
    z-index: 200;
    background-color: var(--ide-bg-alt, #ffffff);
    border-color: var(--ide-border, #ccc);
}

.fileContextMenuItem {
    @apply block w-full text-left px-3 py-1 text-sm focus:outline-none;
    color: var(--ide-text, #222222);
}

.fileContextMenuItem:hover {
    background-color: var(--ide-border, #ccc);
}

.fileContextMenuItem--delete {
    @apply text-red-600 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 focus-visible:bg-red-50 dark:focus-visible:bg-red-900/20;
}

#editorPanel {
    grid-area: editorPanel;
    overflow: hidden;
    position: relative;
}

#inputPanel {
    grid-area: inputPanel;
    user-select: none;
}

#vmMonitorContainer,
#consoleContainer,
#visualizerContainer {
    flex: 1 1 0%;
    min-height: 0;
    overflow: hidden;
}

#vmMonitorContainer {
    user-select: none;
}

#console > .xterm {
    height: 100%;
    box-sizing: border-box;
}

#outputPanel {
    overflow: hidden;
    user-select: none;
}

/* Borders between visible output panels */
#outputPanel > [role="tabpanel"]:not(.hidden) + [role="tabpanel"]:not(.hidden),
#outputPanel > [role="tabpanel"]:not(.hidden) + .hidden + [role="tabpanel"]:not(.hidden) {
    border-top: 1px solid var(--ide-border, #C9E0F7);
}

/* EDITOR */
#monacoEditor {
    position: absolute;
    top: 2.5rem;
    left: 0;
    right: 0;
    bottom: 0;
}

.rendered-markdown>p>strong>span {
    margin-bottom: 0 !important;
}

/* for hover documentation syntax highlighting */
.monaco-hover {
    max-width: min(60vw, 600px) !important;
}

.monaco-hover-content {
    white-space: pre-wrap !important;
    word-break: break-word !important;
}

.monaco-hover code,
span>.monaco-tokenized-source {
    font-size: 0.95em !important;
    font-family: "Consolas", monospace;
}

.monaco-tokenized-source>span.mtk1 {
    @apply text-dark dark:text-light;
}

#vimStatus {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    min-width: 64px;
    overflow: hidden;
}

#vimStatus>span>span>input {
    @apply outline-none bg-transparent border-none;
}

#GUIPanel {
    cursor: pointer;
}

/* VM Monitor */

#shredTable {
    border-collapse: separate;
    border-spacing: 0;
}

#shredTable thead {
    border-color: var(--ide-border, #C9E0F7);
}

#shredTable thead tr th {
    background-color: var(--ide-bg-alt, #DDEEFF);
    border-color: var(--ide-border, #C9E0F7);
}

/* table header */
table thead tr th {
    @apply px-4 bg-sky-blue-300 dark:bg-dark;
}

table tbody tr td {
    @apply py-3 px-4 border-b;
    border-color: var(--ide-border, #C9E0F7);
}

td:nth-child(3) {
    @apply min-w-fit;
}

td:nth-child(4) {
    @apply block text-center align-middle;
}

.removeButton {
    @apply h-7 px-2 m-auto flex items-center justify-center bg-[#FF6868] rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 dark:focus-visible:ring-blue-200 hover:brightness-110 transition duration-300;
}

/* INPUT PANEL */
.toggle-button {
    @apply mr-2 mb-2 p-1 bg-transparent rounded transition-all disabled:opacity-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    color: var(--ide-accent, #FF8833);
    border: 1px solid var(--ide-accent, #FF8833);
    --tw-ring-color: var(--ide-accent, #FF8833);
}

.toggle-button:enabled:hover {
    background-color: var(--ide-accent, #FF8833);
    color: white;
}

.toggle-button.active {
    background-color: var(--ide-accent, #FF8833);
    color: white;
}

.toggle-button.active:enabled:hover {
    background-color: var(--ide-accent-hover, #ffa64d);
}

/* GUI PANEL */
#GUIPanel {
    cursor: pointer;
}

/* HID CONTAINER */
#hidLog {
    width: 270px;
    height: 128px;
}

/* SENSOR CONTAINER */
.sensorLog {
    @apply pt-2 !important;
    width: 270px;
    height: 36px;
}

/* LOG CONSOLE */
.log-container {
    @apply px-2 py-1 mb-1 overflow-hidden rounded-lg;
    background-color: var(--ide-editor-bg, #FEFEFF);
    border: 1px solid var(--ide-border, #CCCCCC);
}

.logMsg {
    margin-bottom: 5px;
    opacity: 1;
    transition: opacity 1s;
}

.fade-out {
    opacity: 0;
}

/* MISC. COMPONENTS */
.button.primary {
    @apply bg-orange hover:bg-orange-light px-3 py-1.5 text-white transition rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-orange focus-visible:ring-offset-2;
}

.button.secondary {
    @apply text-orange hover:text-orange-light border border-orange hover:border-orange-light px-3 py-1.5 rounded-md transition focus:outline-none focus-visible:ring-2 focus-visible:ring-orange focus-visible:ring-offset-2;
}

dialog {
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15), 0 7px 10px rgba(0, 0, 0, 0.05);
}

dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.3);
}

.modal {
    @apply w-full px-8 py-6 rounded-lg;
    background-color: var(--ide-bg-alt, #ffffff);
    color: var(--ide-text, #555);
    border: 1px solid var(--ide-border, #ccc);
    max-height: 75vh;
    max-width: 640px;
    animation: enter-transition 0.1s ease-in-out forwards;
}

.modal form input,
.modal form textarea,
.modal form select {
    background-color: var(--ide-editor-bg, #fefeff);
    color: var(--ide-text, #555);
    border-color: var(--ide-border, #ccc);
}

.form-label {
    @apply block leading-5 py-2;
}

.form-input {
    @apply w-full px-2 py-1 rounded-md focus-visible:outline-none focus-visible:ring-1;
    background-color: var(--ide-editor-bg, #fefeff);
    color: var(--ide-text, #555);
    border: 1px solid var(--ide-border, #ccc);
    --tw-ring-color: var(--ide-accent, #FF8833);
}

.form-select {
    @apply w-full px-2 py-1 rounded-md focus-visible:outline-none focus-visible:ring-1;
    background-color: var(--ide-editor-bg, #fefeff);
    color: var(--ide-text, #555);
    border: 1px solid var(--ide-border, #ccc);
    --tw-ring-color: var(--ide-accent, #FF8833);
}

/* Keyboard Shortcuts Modal */
.shortcuts-section {
    @apply py-3 last:border-b-0;
    border-bottom: 1px solid var(--ide-border, #ccc);
}

.shortcuts-category {
    @apply text-xs font-semibold uppercase tracking-wider pb-2;
    color: var(--ide-text-muted, #888);
}

.shortcuts-grid {
    @apply grid grid-cols-2 gap-y-2 gap-x-4 text-sm items-center;
}

.shortcuts-keys {
    @apply text-right;
}

kbd {
    @apply inline-block px-1.5 py-0.5 text-xs font-mono font-medium rounded shadow-sm;
    background-color: var(--ide-bg, #f3f4f6);
    color: var(--ide-text, #555);
    border: 1px solid var(--ide-border, #ccc);
    min-width: 1.5rem;
    text-align: center;
    line-height: 1.4;
}

.modal.modal-sm {
    max-width: 320px;
}

.modal.modal-lg {
    max-width: 960px;
}

.shortcuts-section {
    @apply py-3 last:border-b-0;
    border-bottom: 1px solid var(--ide-border, #ccc);
}

.shortcuts-category {
    @apply text-xs font-semibold uppercase tracking-wider pb-2;
    color: var(--ide-text-muted, #888);
}

.shortcuts-grid {
    @apply grid grid-cols-2 gap-y-2 gap-x-4 text-sm items-center;
}

.shortcuts-keys {
    @apply text-right;
}

kbd {
    @apply inline-block px-1.5 py-0.5 text-xs font-mono font-medium rounded shadow-sm;
    background-color: var(--ide-bg, #f3f4f6);
    color: var(--ide-text, #555);
    border: 1px solid var(--ide-border, #ccc);
    min-width: 1.5rem;
    text-align: center;
    line-height: 1.4;
}

.divider,
.divider-vert {
    @apply block relative;
}

.divider[data-content]::after,
.divider-vert[data-content]::after {
    background: var(--ide-bg-alt, #fff);
    color: var(--ide-text-muted, #8b8f96);
    content: attr(data-content);
    display: inline-block;
    font-size: 0.8rem;
    padding: 0 0.6rem 0 1rem;
    transform: translateY(-0.85rem);
}

.divider {
    border-top: 0.06rem solid var(--ide-border, #e1e3e5);
    height: 0.05rem;
    margin: 0.4rem 0.2rem 0.4rem 0;
}

.divider[data-content] {
    margin: 0.8rem 0.8rem 0.8rem 0;
}

.resizer.hSplit {
    @apply relative hover:transition hover:opacity-100 hover:h-2 hover:-top-1;
    cursor: row-resize;
}
.resizer.hSplit:hover {
    background-color: var(--ide-accent, #FF8833);
}

.hSplit::after {
    @apply block w-full h-2 -top-[4px] absolute z-30;
    content: "";
}

.resizer.vSplit {
    @apply relative hover:transition hover:opacity-100 hover:w-2 hover:-left-1 z-30;
    cursor: col-resize;
}
.resizer.vSplit:hover {
    background-color: var(--ide-accent, #FF8833);
}

.vSplit::after {
    @apply block h-full w-2 -left-[4px] absolute z-30;
    content: "";
}

.vSplit.active,
.hSplit.active {
    background-color: var(--ide-accent, #FF8833);
}

.resizer {
    @apply opacity-10 z-10 bg-sky-blue-900 dark:bg-gray-200;
    user-select: none;
}

@media (max-width: 640px) {
    .resizer {
        pointer-events: none;
    }

    #monacoEditor {
        touch-action: none;
    }
}

.header {
    @apply w-full flex items-center px-1 border-b;
}

.header-item {
    @apply text-sm px-2 transition duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-blue-600 dark:focus-visible:ring-blue-200 rounded;
    user-select: none;
}

/* ===== BOTTOM SHEET (Mobile File Explorer) ===== */
.bottom-sheet-overlay {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: flex-end;
}

.bottom-sheet-overlay.hidden {
    display: none;
}

.bottom-sheet-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
}

.bottom-sheet-content {
    position: relative;
    width: 100%;
    max-height: 70vh;
    background-color: var(--ide-bg-alt, #ffffff);
    color: var(--ide-text, #555);
    border-top: 1px solid var(--ide-border, #ccc);
    @apply rounded-t-xl;
    transform: translateY(0);
    transition: transform 0.3s ease-out;
    z-index: 101;
    animation: slide-up 0.3s ease-out forwards;
}

.bottom-sheet-content.closing {
    animation: slide-down 0.2s ease-in forwards;
}

@keyframes slide-up {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

@keyframes slide-down {
    from { transform: translateY(0); }
    to { transform: translateY(100%); }
}

.bottom-sheet-handle {
    display: flex;
    justify-content: center;
    padding: 0.5rem 0;
}

.bottom-sheet-handle-bar {
    width: 2.5rem;
    height: 0.25rem;
    border-radius: 0.125rem;
    background-color: var(--ide-border, #ccc);
}

/* ===== FULLSCREEN OVERLAY ===== */
.fullscreen-overlay {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    @apply bg-white dark:bg-dark-1;
    animation: enter-transition 0.15s ease-in-out forwards;
}

.fullscreen-overlay.hidden {
    display: none;
}

.fullscreen-content {
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.fullscreen-content > * {
    width: 100% !important;
    height: 100% !important;
}

.fullscreen-toolbar {
    position: fixed;
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.5rem;
    border-radius: 0.75rem;
    z-index: 10000;
    @apply bg-sky-blue-300 dark:bg-dark-4;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.18);
    opacity: 1;
    transition: opacity 0.3s ease;
}

.fullscreen-toolbar.toolbar-hidden {
    opacity: 0;
    pointer-events: none;
}

.fullscreen-btn {
    @apply flex items-center justify-center p-2 rounded-lg transition
           text-dark-5 dark:text-dark-b
           hover:text-dark dark:hover:text-white
           hover:bg-sky-blue dark:hover:bg-dark-5
           focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 dark:focus-visible:ring-blue-200;
    cursor: pointer;
}

.fullscreen-btn:disabled {
    @apply opacity-50 cursor-not-allowed;
}

.fullscreen-divider {
    @apply w-px h-6 mx-1 bg-dark-d dark:bg-dark-6;
}

/* ===== LIVE CODING MODE ===== */
.live-coding-overlay {
    position: fixed;
    inset: 0;
    z-index: 9998;
    background: #000;
    animation: enter-transition 0.15s ease-in-out forwards;
}

.live-coding-overlay.hidden {
    display: none;
}

.live-coding-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
}

.live-coding-bg > * {
    width: 100% !important;
    height: 100% !important;
}

/* Foreground content: topbar + editor + right panel */
.live-coding-fg {
    position: absolute;
    inset: 0;
    z-index: 1;
    display: flex;
    flex-direction: column;
}

/* Top bar: transparent, no blur */
.live-coding-topbar {
    flex: none;
    z-index: 2;
}

/* Main body below topbar: editor left, panels right */
.live-coding-body {
    flex: 1;
    display: flex;
    min-height: 0;
}

/* Editor takes remaining space, semi-transparent backdrop over entire area */
.live-coding-editor {
    flex: 1;
    position: relative;
    background: rgba(0, 0, 0, 0.35);
    min-width: 0;
}

/* Right panel: console + VM monitor stacked, transparent */
.live-coding-right {
    width: 300px;
    display: flex;
    flex-direction: column;
    background: rgba(0, 0, 0, 0.35);
    border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.live-coding-right-panel {
    flex: 1;
    position: relative;
    overflow: hidden;
    min-height: 0;
}

.live-coding-right-panel > * {
    width: 100% !important;
    height: 100% !important;
}

.live-coding-right-label {
    padding: 0.25rem 0.5rem;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgba(255, 255, 255, 0.4);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.live-coding-right-panel + .live-coding-right-panel {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* Hide Monaco scrollbar backgrounds for cleaner look */
.live-coding-editor .monaco-scrollable-element > .scrollbar {
    background: transparent !important;
}

/* Make line numbers slightly transparent */
.live-coding-editor .margin-view-overlays .line-numbers {
    opacity: 0.5;
}

/* Cursor should remain fully visible */
.live-coding-editor .cursor {
    opacity: 1 !important;
}

/* Console in live coding mode: transparent background */
.live-coding-right .xterm-viewport,
.live-coding-right .xterm-screen {
    background-color: transparent !important;
}

/* VM monitor in live coding mode: transparent */
.live-coding-right table {
    color: rgba(255, 255, 255, 0.7);
}
.live-coding-right th,
.live-coding-right td {
    border-color: rgba(255, 255, 255, 0.1);
}
.live-coding-right thead {
    background: transparent;
}

/* ===== BOTTOM SHEET (Mobile File Explorer) ===== */
.bottom-sheet-overlay {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: flex-end;
}

.bottom-sheet-overlay.hidden {
    display: none;
}

.bottom-sheet-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
}

.bottom-sheet-content {
    position: relative;
    width: 100%;
    max-height: 70vh;
    background-color: var(--ide-bg-alt, #ffffff);
    color: var(--ide-text, #555);
    border-top: 1px solid var(--ide-border, #ccc);
    @apply rounded-t-xl;
    transform: translateY(0);
    transition: transform 0.3s ease-out;
    z-index: 101;
    animation: slide-up 0.3s ease-out forwards;
}

.bottom-sheet-content.closing {
    animation: slide-down 0.2s ease-in forwards;
}

@keyframes slide-up {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

@keyframes slide-down {
    from { transform: translateY(0); }
    to { transform: translateY(100%); }
}

.bottom-sheet-handle {
    display: flex;
    justify-content: center;
    padding: 0.5rem 0;
}

.bottom-sheet-handle-bar {
    width: 2.5rem;
    height: 0.25rem;
    border-radius: 0.125rem;
    background-color: var(--ide-border, #ccc);
}

